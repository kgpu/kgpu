<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Kgpu</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <base href="">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        

    </head>
    <body class="light">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { } 
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <ol class="chapter"><li class="affix"><a href="homepage.html">Homepage</a></li><li><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><a href="getting_started.html"><strong aria-hidden="true">2.</strong> Getting Started</a></li><li><a href="structure/structure.html"><strong aria-hidden="true">3.</strong> Structure</a></li><li><ol class="section"><li><a href="structure/jnrgen.html"><strong aria-hidden="true">3.1.</strong> JNR Gen</a></li></ol></li><li><a href="resources.html"><strong aria-hidden="true">4.</strong> Additional Resources</a></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                        </div>

                        <h1 class="menu-title">Kgpu</h1> 

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <a class="header" href="print.html#kgpu" id="kgpu"><h1>Kgpu</h1></a>
<p>A Cross Platform Graphics API For Kotlin JVM/JS</p>
<p><strong>Requirements:</strong></p>
<ul>
<li>JDK 11</li>
</ul>
<p><strong>Supported Platforms:</strong></p>
<ul>
<li>Windows 10</li>
<li>MacOS (See <a href="https://github.com/kgpu/kgpu/issues/1">Issue #1</a>)</li>
<li>Linux</li>
<li>Chrome Canary</li>
<li>Firefox Nightly</li>
</ul>
<a class="header" href="print.html#links" id="links"><h2>Links</h2></a>
<p><a href="kgpu/index.html"><strong>Documentation</strong></a></p>
<p><a href="examples/index.html"><strong>Live Example</strong></a></p>
<a class="header" href="print.html#images" id="images"><h2>Images</h2></a>
<p><img src="images/earth.png" alt="Earth Example" /></p>
<a class="header" href="print.html#examples" id="examples"><h2>Examples</h2></a>
<p>To run the examples on Desktop:</p>
<pre><code class="language-bash">gradlew runTriangleExample
gradlew runCubeExample
gradlew runTextureExample
gradlew runEarthExample
</code></pre>
<p>To run the examples on the Web:</p>
<pre><code>gradlew buildWeb startWebServer
</code></pre>
<p>Then navigate to <a href="http://localhost:8080/index.html">http://localhost:8080/index.html</a></p>
<a class="header" href="print.html#introduction" id="introduction"><h1>Introduction</h1></a>
<p>Kgpu is cross platform library that exposes the WebGPU api for Kotlin Javascript, and for Kotlin on the JVM.
This allows users to write code that can be run on both web browsers and natively on their computers.</p>
<a class="header" href="print.html#what-is-webgpu" id="what-is-webgpu"><h3>What is WebGPU?</h3></a>
<p>According to the W3C website, WebGPU is,</p>
<blockquote>
<p>an interface between the Web Platform and modern 3D graphics and computation capabilities present
in native system platforms. The goal is to design a new Web API that exposes these modern technologies
in a performant, powerful and safe manner. It should work with existing platform APIs such as Direct3D 12
from Microsoft, Metal from Apple, and Vulkan from the Khronos Group. This API will also expose the generic
computational facilities available in today's GPUs to the Web, and investigate shader languages to produce a
cross-platform solution.</p>
</blockquote>
<a class="header" href="print.html#what-is-wgpu" id="what-is-wgpu"><h3>What is Wgpu?</h3></a>
<p>Wgpu is Mozilla's Rust implementation of the WebGPU specification. It is similar to Dawn, Google's WebGPU implementation
for Chromium. </p>
<a class="header" href="print.html#getting-started" id="getting-started"><h1>Getting Started</h1></a>
<p>To start a new project, you can use the <a href="https://github.com/kgpu/kgpu-template">kgpu-template repository</a>.
It allows you to get a basic project setup by only needing to change a few files.</p>
<a class="header" href="print.html#cloning-the-project" id="cloning-the-project"><h3>Cloning the project</h3></a>
<a class="header" href="print.html#using-github" id="using-github"><h5>Using Github</h5></a>
<ol>
<li>Navigate to the <a href="https://github.com/kgpu/kgpu-template">kgpu-template repository</a></li>
<li>Click the <code>Use This Template</code> Button</li>
</ol>
<p>For more info, see <a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-from-a-template">Creating a repository from a template</a></p>
<a class="header" href="print.html#no-github-account" id="no-github-account"><h5>No Github Account</h5></a>
<ol>
<li>Navigate to the <a href="https://github.com/kgpu/kgpu-template">kgpu-template repository</a></li>
<li>Click the <code>Clone or Download</code> (or <code>Code</code>) dropdown</li>
<li>Select the <code>Download Zip</code> option</li>
</ol>
<a class="header" href="print.html#editing-the-project-settings" id="editing-the-project-settings"><h3>Editing the project settings</h3></a>
<p>Once you have the project copied, then you can open it in any text editor,
and then open the <code>gradle.properties</code> file.</p>
<p>You can edit the file to change the name of the project, the project's group, and the version of KGPU to use.</p>
<p>Here is an example properties file:</p>
<pre><code class="language-properties">kotlin.code.style=official
kgpuVersion=0.1.0-SNAPSHOT
projectName=ProjectName
projectGroup=your.group.here
projectVersion=0.1.0
desktopMainClass=DesktopKt
</code></pre>
<a class="header" href="print.html#editing-website" id="editing-website"><h3>Editing Website</h3></a>
<p>The last part of setup is setting up the index.html page to use.</p>
<p>Open the <code>src/jsMain/resources/index.html</code> file</p>
<p>Then change the ProjectName in the script source, to the name you set in
the <code>gradle.properties</code> file.</p>
<pre><code class="language-html">&lt;script&gt;
     if (!navigator.gpu) {
        document.body.className = 'error';
        document.getElementById('content').hidden = true
        document.getElementById('errorMessage').hidden = false
    }
&lt;/script&gt;
&lt;script src=&quot;ProjectName.js&quot;&gt;&lt;/script&gt; &lt;!-- Change this line! --&gt;
</code></pre>
<a class="header" href="print.html#start-coding" id="start-coding"><h3>Start Coding</h3></a>
<p>You can now start working on your project! There are three kotlin files in the template: <code>Application</code>, <code>Desktop</code>,
and <code>Browser</code></p>
<p><code>src/commonMain/kotlin/Application.kt:</code>
This is the code that is shared between all of the platforms.</p>
<p><code>src/jsMain/kotlin/Browser.kt:</code>
This is the code that will be compiled into javascript for the browser</p>
<p><code>src/jvmMain/kotlin/Desktop.kt:</code>
This is the code that will be compiled into java classes and executed on the Desktop via the JVM.</p>
<a class="header" href="print.html#running-the-application" id="running-the-application"><h3>Running the application</h3></a>
<p>To run on the desktop:</p>
<pre><code class="language-bash">gradlew runJvm
</code></pre>
<p>To build the examples for the Web:</p>
<pre><code>gradlew jsBrowserDistribution
</code></pre>
<p>And you can start a static file server for the web:</p>
<pre><code>gradlew startWebServer
</code></pre>
<p>And then navigate to <a href="http://localhost:8080/index.html">http://localhost:8080/index.html</a></p>
<a class="header" href="print.html#structure" id="structure"><h1>Structure</h1></a>
<a class="header" href="print.html#src" id="src"><h3>src</h3></a>
<p>This folder contains the crossplatform library that applications will depend on.
It is split into 3 parts: common, jvm (desktop), js (web browsers).</p>
<p>The common folder contains code that is common between all of the platforms, and
the APIs that are expected to be implemented by the jvm and javascript modules.</p>
<p>The js folder has all of the code that is used on Web browsers. This includes code to set
up a canvas, load images, and bindings to the gl-matrix library.</p>
<p>The jvm folder has the code that maps Kgpu types with the wgpuj module (see below). It also
contains code to create windows (via GLFW), load images (via Java AWT), and a wrapper around the JOML math library.</p>
<a class="header" href="print.html#examples-1" id="examples-1"><h3>examples</h3></a>
<p>This contains the example code for Kgpu. Like the core library, it is split into three parts: common, js, and jvm.
The js and jvm modules are responible for setting up the basic application, and selecting which example to run.</p>
<p>The common folder contains all of the core code examples, and the resources used (images, shaders)</p>
<a class="header" href="print.html#wgpuj" id="wgpuj"><h3>wgpuj</h3></a>
<p>This module is written in Java and has the FFI code between the JVM and wgpu. It uses the jnr-ffi library,
which creates JNI bindings at runtime. Most of the code in this module is generated by jnr-gen</p>
<a class="header" href="print.html#wgpujjnrgen" id="wgpujjnrgen"><h3>wgpuj/jnrgen</h3></a>
<p>jnr-gen is a tool that generates jnr enum and struct classes from the wgpu.h header. For more info see
<a href="jnrgen.md">this page</a> all about jnr-gen.</p>
<a class="header" href="print.html#wgpujwgpu-test" id="wgpujwgpu-test"><h3>wgpuj/wgpu-test</h3></a>
<p>This is a small crate which contains unit tests for the wgpuj library.</p>
<a class="header" href="print.html#jnr-gen" id="jnr-gen"><h1>JNR Gen</h1></a>
<p>JNR Gen is a program to generate Java enums, structs, and constants from a c header file.
To run JNR Gen and update the java files, run the following command:</p>
<pre><code>gradlew native:updateBindings
</code></pre>
<a class="header" href="print.html#example-enum" id="example-enum"><h2>Example Enum</h2></a>
<pre><code class="language-java">package io.github.kgpu.wgpuj.jni;


/** NOTE: THIS FILE WAS PRE-GENERATED BY JNR_GEN! */
public enum WgpuBindingType {
    UNIFORM_BUFFER,
    STORAGE_BUFFER,
    READONLY_STORAGE_BUFFER,
    SAMPLER,
    COMPARISON_SAMPLER,
    SAMPLED_TEXTURE,
    READONLY_STORAGE_TEXTURE,
    WRITEONLY_STORAGE_TEXTURE,
}
</code></pre>
<a class="header" href="print.html#example-struct" id="example-struct"><h2>Example Struct</h2></a>
<pre><code class="language-java">package io.github.kgpu.wgpuj.jni;

import io.github.kgpu.wgpuj.WgpuJava;
import io.github.kgpu.wgpuj.util.WgpuJavaStruct;
import io.github.kgpu.wgpuj.util.CStrPointer;
import io.github.kgpu.wgpuj.util.RustCString;
import jnr.ffi.Runtime;
import jnr.ffi.Struct;

/** NOTE: THIS FILE WAS PRE-GENERATED BY JNR_GEN! */
public class WgpuBindGroupDescriptor extends WgpuJavaStruct {

    private final @CStrPointer Struct.Pointer label = new Struct.Pointer();
    private final DynamicStructRef&lt;WgpuBindGroupEntry&gt; entries = new DynamicStructRef&lt;&gt;(WgpuBindGroupEntry.class);

    protected WgpuBindGroupDescriptor(boolean direct){
         if(direct){
             useDirectMemory();
        }
    }

    @Deprecated
    public WgpuBindGroupDescriptor(Runtime runtime){
        super(runtime);
    }

    public static WgpuBindGroupDescriptor createHeap(){
        return new WgpuBindGroupDescriptor(false);
    }

    public static WgpuBindGroupDescriptor createDirect(){
        return new WgpuBindGroupDescriptor(true);
    }

    public java.lang.String getLabel(){
        return RustCString.fromPointer(label.get());
    }

    public void setLabel(java.lang.String x){
        this.label.set(RustCString.toPointer(x));
    }
    
    public DynamicStructRef&lt;WgpuBindGroupEntry&gt; getEntries(){
        return entries;
    }

    public void setEntries(WgpuBindGroupEntry... x){
        if(x.length == 0 || x[0] == null){
            this.entries.set(WgpuJava.createNullPointer());
        } else {
            this.entries.set(x);
        }
    }

}
</code></pre>
<a class="header" href="print.html#example-constants" id="example-constants"><h2>Example Constants</h2></a>
<pre><code class="language-java">package io.github.kgpu.wgpuj.jni;


/** NOTE: THIS FILE WAS PRE-GENERATED BY JNR_GEN! */
public final class Wgpu{

    public static final int BIND_BUFFER_ALIGNMENT = 256;
    public static final int COPY_BYTES_PER_ROW_ALIGNMENT = 256;
    public static final int DEFAULT_BIND_GROUPS = 4;
    public static final int DESIRED_NUM_FRAMES = 3;
    public static final int MAX_ANISOTROPY = 16;
    public static final int MAX_COLOR_TARGETS = 4;
    public static final int MAX_MIP_LEVELS = 16;
    public static final int MAX_VERTEX_BUFFERS = 16;

    public static final class ShaderStage{
        public static final int NONE = 0;
        public static final int VERTEX = 1;
        public static final int FRAGMENT = 2;
        public static final int COMPUTE = 4;
    }

}
</code></pre>
<a class="header" href="print.html#additional-resources" id="additional-resources"><h1>Additional Resources</h1></a>
<p><a href="kgpu/index.html"><strong>Documentation</strong></a></p>
<a class="header" href="print.html#tutorials--examples" id="tutorials--examples"><h3>Tutorials / Examples</h3></a>
<p><a href="https://sotrh.github.io/learn-wgpu/"><strong>Learn Wgpu</strong></a></p>
<p><a href="https://github.com/gfx-rs/wgpu-rs/tree/master/examples"><strong>Wgpu-rs Examples</strong></a></p>
<p><a href="https://github.com/austinEng/webgpu-samples"><strong>WebGPU Examples</strong></a></p>
<a class="header" href="print.html#webgpu" id="webgpu"><h3>WebGPU:</h3></a>
<p><a href="https://gpuweb.github.io/gpuweb/"><strong>WebGPU Specification</strong></a></p>
<p><a href="https://github.com/gpuweb/gpuweb"><strong>WebGPU Github Page</strong></a></p>
<a class="header" href="print.html#wgpu" id="wgpu"><h3>Wgpu:</h3></a>
<p><a href="https://github.com/gfx-rs/wgpu-native"><strong>Wgpu-native Github Repo</strong></a></p>
<p><a href="https://github.com/gfx-rs/wgpu"><strong>Wgpu Github Repo</strong></a></p>
<p><a href="https://github.com/jnr/jnr-ffi"><strong>jnr-ffi Github Repo</strong></a></p>
<p><a href="https://javadoc.io/doc/com.github.jnr/jnr-ffi/latest/index.html"><strong>jnr-ffi Javadoc</strong></a></p>
<p><a href="https://github.com/LWJGL/lwjgl3"><strong>LWJGL Github Repo</strong></a></p>
<p><a href="https://javadoc.lwjgl.org/overview-summary.html"><strong>LWJGL Javadoc</strong></a></p>
<p><a href="https://www.lwjgl.org/"><strong>LWJGL Website</strong></a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
